{
  "version": 3,
  "sources": ["../../src/js/media-seek-backward-button.js"],
  "sourcesContent": ["import MediaChromeButton from './media-chrome-button.js';\nimport { defineCustomElement } from './utils/defineCustomElement.js';\nimport {\n  Window as window,\n  Document as document,\n} from './utils/server-safe-globals.js';\nimport { MediaUIEvents, MediaUIAttributes } from './constants.js';\nimport { verbs } from './labels/labels.js';\nimport { getSlotted, updateIconText } from './utils/element-utils.js';\n\nconst DEFAULT_SEEK_OFFSET = 30;\n\nconst backwardIcon =\n  `<svg aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"-3 -3 24 24\"><defs><style>.text{font-size:8px;font-family:Arial-BoldMT, Arial;font-weight:700;}</style></defs><text class=\"text value\" transform=\"translate(1.68 17.6)\">${DEFAULT_SEEK_OFFSET}</text><path d=\"M9.48,3V0L3.87,4l5.61,4V5a5.54,5.54,0,0,1,1.92,10.5V17.6A7.5,7.5,0,0,0,9.48,3Z\"/></svg>`;\n\nconst slotTemplate = document.createElement('template');\nslotTemplate.innerHTML = `  \n  <slot name=\"backward\">${backwardIcon}</slot>\n`;\n\nconst DEFAULT_TIME = 0;\n\nconst updateAriaLabel = (el) => {\n  // NOTE: seek direction is described via text, so always use positive numeric representation\n  const seekOffset = Math.abs(+el.getAttribute('seek-offset'));\n  const label = verbs.SEEK_BACK_N_SECS({ seekOffset });\n  el.setAttribute('aria-label', label);\n};\n\nconst updateSeekIconValue = (el) => {\n  const svg = getSlotted(el, 'backward');\n  const value = el.getAttribute('seek-offset');\n  updateIconText(svg, value);\n};\n\nclass MediaSeekBackwardButton extends MediaChromeButton {\n  static get observedAttributes() {\n    return [...super.observedAttributes, MediaUIAttributes.MEDIA_CURRENT_TIME];\n  }\n\n  constructor(options = {}) {\n    super({ slotTemplate, ...options });\n  }\n\n  connectedCallback() {\n    // NOTE: currently don't support changing the seek value, so only need to set this once on initialization.\n    if (!this.hasAttribute('seek-offset')) {\n      this.setAttribute('seek-offset', DEFAULT_SEEK_OFFSET);\n    }\n    updateAriaLabel(this);\n    updateSeekIconValue(this);\n    super.connectedCallback();\n  }\n\n  attributeChangedCallback(attrName, _oldValue, newValue) {\n    if (attrName === 'seek-offset') {\n      if (newValue == undefined) {\n        this.setAttribute('seek-offset', DEFAULT_SEEK_OFFSET);\n      }\n      updateSeekIconValue(this);\n      updateAriaLabel(this);\n    }\n  }\n\n  handleClick() {\n    const currentTimeStr = this.getAttribute(\n      MediaUIAttributes.MEDIA_CURRENT_TIME\n    );\n    const seekOffset = +this.getAttribute('seek-offset');\n    const currentTime =\n      currentTimeStr && !Number.isNaN(+currentTimeStr)\n        ? +currentTimeStr\n        : DEFAULT_TIME;\n    const detail = Math.max(currentTime - seekOffset, 0);\n    const evt = new window.CustomEvent(MediaUIEvents.MEDIA_SEEK_REQUEST, {\n      composed: true,\n      bubbles: true,\n      detail,\n    });\n    this.dispatchEvent(evt);\n  }\n}\n\ndefineCustomElement('media-seek-backward-button', MediaSeekBackwardButton);\n\nexport default MediaSeekBackwardButton;\n"],
  "mappings": "qrBAAA,oCAA8B,yCAC9B,EAAoC,0CACpC,EAGO,0CACP,EAAiD,0BACjD,EAAsB,8BACtB,EAA2C,oCAE3C,KAAM,GAAsB,GAEtB,EACJ,+OAA+O,2GAE3O,EAAe,WAAS,cAAc,YAC5C,EAAa,UAAY;AAAA,0BACC;AAAA,EAG1B,KAAM,GAAe,EAEf,EAAkB,AAAC,GAAO,CAE9B,KAAM,GAAa,KAAK,IAAI,CAAC,EAAG,aAAa,gBACvC,EAAQ,QAAM,iBAAiB,CAAE,eACvC,EAAG,aAAa,aAAc,IAG1B,EAAsB,AAAC,GAAO,CAClC,KAAM,GAAM,iBAAW,EAAI,YACrB,EAAQ,EAAG,aAAa,eAC9B,qBAAe,EAAK,IAGtB,eAAsC,UAAkB,WAC3C,qBAAqB,CAC9B,MAAO,CAAC,GAAG,MAAM,mBAAoB,oBAAkB,oBAGzD,YAAY,EAAU,GAAI,CACxB,MAAM,CAAE,kBAAiB,IAG3B,mBAAoB,CAElB,AAAK,KAAK,aAAa,gBACrB,KAAK,aAAa,cAAe,GAEnC,EAAgB,MAChB,EAAoB,MACpB,MAAM,oBAGR,yBAAyB,EAAU,EAAW,EAAU,CACtD,AAAI,IAAa,eACX,IAAY,MACd,KAAK,aAAa,cAAe,GAEnC,EAAoB,MACpB,EAAgB,OAIpB,aAAc,CACZ,KAAM,GAAiB,KAAK,aAC1B,oBAAkB,oBAEd,EAAa,CAAC,KAAK,aAAa,eAChC,EACJ,GAAkB,CAAC,OAAO,MAAM,CAAC,GAC7B,CAAC,EACD,EACA,EAAS,KAAK,IAAI,EAAc,EAAY,GAC5C,EAAM,GAAI,UAAO,YAAY,gBAAc,mBAAoB,CACnE,SAAU,GACV,QAAS,GACT,WAEF,KAAK,cAAc,IAIvB,0BAAoB,6BAA8B,GAElD,GAAO,GAAQ",
  "names": []
}
