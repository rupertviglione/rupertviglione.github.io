var m=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var R=Object.getOwnPropertyNames;var M=Object.prototype.hasOwnProperty;var b=i=>m(i,"__esModule",{value:!0});var _=(i,e)=>{for(var s in e)m(i,s,{get:e[s],enumerable:!0})},f=(i,e,s,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let c of R(e))!M.call(i,c)&&(s||c!=="default")&&m(i,c,{get:()=>e[c],enumerable:!(t=A(e,c))||t.enumerable});return i};var D=(i=>(e,s)=>i&&i.get(e)||(s=f(b({}),e,1),i&&i.set(e,s),s))(typeof WeakMap!="undefined"?new WeakMap:0);var y={};_(y,{default:()=>O});var a=require("./utils/server-safe-globals.js"),g=require("./utils/defineCustomElement.js"),n=require("./constants.js");const I=a.Document.createElement("template");I.innerHTML=`
  <style>
    :host {
      background-color: #000;
      height: auto;
      width: auto;
    }

    img {
      object-fit: none;
    }
  </style>
  <img crossorigin loading="eager" decoding="async" />
`;class u extends a.Window.HTMLElement{static get observedAttributes(){return[n.MediaUIAttributes.MEDIA_CONTROLLER,"time",n.MediaUIAttributes.MEDIA_PREVIEW_IMAGE,n.MediaUIAttributes.MEDIA_PREVIEW_COORDS]}constructor(){super();this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(I.content.cloneNode(!0))}connectedCallback(){var s;const e=this.getAttribute(n.MediaUIAttributes.MEDIA_CONTROLLER);if(e){const t=a.Document.getElementById(e);(s=t==null?void 0:t.associateElement)==null||s.call(t,this)}}disconnectedCallback(){var s;if(this.getAttribute(n.MediaUIAttributes.MEDIA_CONTROLLER)){const t=a.Document.getElementById(mediaControllerId);(s=t==null?void 0:t.unassociateElement)==null||s.call(t,this)}}attributeChangedCallback(e,s,t){var c,d;if(["time",n.MediaUIAttributes.MEDIA_PREVIEW_IMAGE,n.MediaUIAttributes.MEDIA_PREVIEW_COORDS].includes(e)&&this.update(),e===n.MediaUIAttributes.MEDIA_CONTROLLER){if(s){const o=a.Document.getElementById(s);(c=o==null?void 0:o.unassociateElement)==null||c.call(o,this)}if(t){const o=a.Document.getElementById(t);(d=o==null?void 0:o.associateElement)==null||d.call(o,this)}}}update(){const e=this.getAttribute(n.MediaUIAttributes.MEDIA_PREVIEW_COORDS),s=this.getAttribute(n.MediaUIAttributes.MEDIA_PREVIEW_IMAGE);if(!(e&&s))return;const t=this.shadowRoot.querySelector("img"),[c,d,o,r]=e.split(/\s+/).map(p=>+p),h=s,E=()=>{t.style.height=`${r}px`,t.style["aspect-ratio"]=`${o} / ${r}`};t.src!==h&&(t.onload=E,t.src=h,E()),E(),t.style["object-position"]=`-${c}px -${d}px`}}(0,g.defineCustomElement)("media-thumbnail-preview",u);var O=u;module.exports=D(y);
//# sourceMappingURL=media-thumbnail-preview.js.map
