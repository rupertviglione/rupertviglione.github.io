var C=Object.create;var c=Object.defineProperty;var _=Object.getOwnPropertyDescriptor;var w=Object.getOwnPropertyNames;var U=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var E=t=>c(t,"__esModule",{value:!0});var x=(t,e)=>{for(var i in e)c(t,i,{get:e[i],enumerable:!0})},b=(t,e,i,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of w(e))!k.call(t,r)&&(i||r!=="default")&&c(t,r,{get:()=>e[r],enumerable:!(n=_(e,r))||n.enumerable});return t},B=(t,e)=>b(E(c(t!=null?C(U(t)):{},"default",!e&&t&&t.__esModule?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t),P=(t=>(e,i)=>t&&t.get(e)||(i=b(E({}),e,1),t&&t.set(e,i),i))(typeof WeakMap!="undefined"?new WeakMap:0);var L={};x(L,{default:()=>S});var A=B(require("./media-chrome-range.js"),1),I=require("./utils/defineCustomElement.js"),o=require("./utils/server-safe-globals.js"),a=require("./constants.js"),M=require("./labels/labels.js"),h=require("./utils/time.js");const y="video not loaded, unknown time.",p=t=>{const e=t.range,i=(0,h.formatAsTimePhrase)(+e.value),n=(0,h.formatAsTimePhrase)(+e.max),r=i&&n?`${i} of ${n}`:y;e.setAttribute("aria-valuetext",r)},g=o.Document.createElement("template");g.innerHTML=`
  <style>
    #thumbnailContainer {
      display: none;
    }

    media-thumbnail-preview {
      /* Scale the thumbnail preview to 50% and reposition appropriately to not take up too much real-estate. */
      transform: scale(0.5) translateY(50%) translateX(-100%);
      position: absolute;
      bottom: calc(100% + 5px);
      border: 2px solid #fff;
      border-radius: 2px;
      background-color: #000;
    }

    /* Can't get this working. Trying a downward triangle. */
    /* media-thumbnail-preview::after {
      content: "";
      display: block;
      width: 300px;
      height: 300px;
      margin: 100px;
      background-color: #ff0;
    } */

    :host([${a.MediaUIAttributes.MEDIA_PREVIEW_IMAGE}]:hover) #thumbnailContainer {
      display: block;
      animation: fadeIn ease 0.5s;
    }

    @keyframes fadeIn {
      0% {
        /* transform-origin: bottom center; */
        /* transform: scale(0.7); */
        margin-top: 10px;
        opacity: 0;
      }
      100% {
        /* transform-origin: bottom center; */
        /* transform: scale(1); */
        margin-top: 0;
        opacity: 1;
      }
    }
  </style>
  <div id="thumbnailContainer">
    <media-thumbnail-preview></media-thumbnail-preview>
  </div>
`;class v extends A.default{static get observedAttributes(){return[...super.observedAttributes,"thumbnails",a.MediaUIAttributes.MEDIA_DURATION,a.MediaUIAttributes.MEDIA_CURRENT_TIME,a.MediaUIAttributes.MEDIA_PREVIEW_IMAGE,a.MediaUIAttributes.MEDIA_BUFFERED]}constructor(){super();this.shadowRoot.appendChild(g.content.cloneNode(!0)),this.range.addEventListener("input",()=>{const i=this.range.value,n=new o.Window.CustomEvent(a.MediaUIEvents.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:i});this.dispatchEvent(n)}),this.enableThumbnails()}connectedCallback(){this.range.setAttribute("aria-label",M.nouns.SEEK()),super.connectedCallback()}attributeChangedCallback(e,i,n){e===a.MediaUIAttributes.MEDIA_CURRENT_TIME&&(this.range.value=+n,p(this),this.updateBar()),e===a.MediaUIAttributes.MEDIA_DURATION&&(this.range.max=Math.floor(+n),p(this),this.updateBar()),e===a.MediaUIAttributes.MEDIA_BUFFERED&&this.updateBar(),super.attributeChangedCallback(e,i,n)}get mediaDuration(){return+this.getAttribute(a.MediaUIAttributes.MEDIA_DURATION)}get mediaCurrentTime(){return+this.getAttribute(a.MediaUIAttributes.MEDIA_CURRENT_TIME)}get mediaBuffered(){const e=this.getAttribute(a.MediaUIAttributes.MEDIA_BUFFERED);if(e)return e.split(" ").map(i=>i.split(":"))}getBarColors(){let e=super.getBarColors();if(!this.mediaBuffered||!this.mediaBuffered.length||this.mediaDuration<=0)return e;const i=this.mediaBuffered;let n=0;for(const[u,d]of i)if(this.mediaCurrentTime>=u&&this.mediaCurrentTime<=d){n=d;break}const r=n/this.mediaDuration*100;return e.splice(1,0,["var(--media-time-buffered-color, #777)",r]),e}enableThumbnails(){this.thumbnailPreview=this.shadowRoot.querySelector("media-thumbnail-preview"),this.shadowRoot.querySelector("#thumbnailContainer").classList.add("enabled");let i;const n=()=>{i=f=>{const m=+this.getAttribute(a.MediaUIAttributes.MEDIA_DURATION);if(!m)return;const s=this.range.getBoundingClientRect();let l=(f.clientX-s.left)/s.width;l=Math.max(0,Math.min(1,l));const T=s.left-this.getBoundingClientRect().left+l*s.width;this.thumbnailPreview.style.left=`${T}px`;const D=l*m,R=new o.Window.CustomEvent(a.MediaUIEvents.MEDIA_PREVIEW_REQUEST,{composed:!0,bubbles:!0,detail:D});this.dispatchEvent(R)},o.Window.addEventListener("mousemove",i,!1)},r=()=>{o.Window.removeEventListener("mousemove",i)};let u=!1,d=f=>{const m=this.getAttribute(a.MediaUIAttributes.MEDIA_DURATION);if(!u&&m){u=!0,n();let s=l=>{l.target!=this&&!this.contains(l.target)&&(o.Window.removeEventListener("mousemove",s),u=!1,r())};o.Window.addEventListener("mousemove",s,!1)}};this.addEventListener("mousemove",d,!1)}}(0,I.defineCustomElement)("media-time-range",v);var S=v;module.exports=P(L);
//# sourceMappingURL=media-time-range.js.map
