{
  "version": 3,
  "sources": ["../src/js/media-chrome-range.js"],
  "sourcesContent": ["import { MediaUIAttributes } from './constants.js';\nimport { defineCustomElement } from './utils/defineCustomElement.js';\nimport {\n  Window as window,\n  Document as document,\n} from './utils/server-safe-globals.js';\n\nconst template = document.createElement('template');\n\n// Can't comma-separate selectors like ::-webkit-slider-thumb, ::-moz-range-thumb\n// Browsers ignore the whole rule if you do. So using templates for those.\nconst thumbStyles = `\n  height: var(--thumb-height);\n  width: var(--media-range-thumb-width, 10px);\n  border: var(--media-range-thumb-border, none);\n  border-radius: var(--media-range-thumb-border-radius, 10px);\n  background: var(--media-range-thumb-background, #fff);\n  box-shadow: var(--media-range-thumb-box-shadow, 1px 1px 1px transparent);\n  cursor: pointer;\n  transition: var(--media-range-thumb-transition, none);\n  transform: var(--media-range-thumb-transform, none);\n  opacity: var(--media-range-thumb-opacity, 1);\n`;\n\nconst trackStyles = `\n  width: var(--media-range-track-width, 100%);\n  min-width: 40px;\n  height: var(--track-height);\n  border: var(--media-range-track-border, none);\n  border-radius: var(--media-range-track-border-radius, 0);\n  background: var(--media-range-track-background-internal, var(--media-range-track-background-color, #eee));\n\n  box-shadow: var(--media-range-track-box-shadow, none);\n  transition: var(--media-range-track-transition, none);\n  cursor: pointer;\n`;\n\ntemplate.innerHTML = `\n  <style>\n    :host {\n      --thumb-height: var(--media-range-thumb-height, 10px);\n      --track-height: var(--media-range-track-height, 4px);\n\n      position: relative;\n      display: inline-block;\n      vertical-align: middle;\n      box-sizing: border-box;\n      background: var(--media-control-background, rgba(20,20,30, 0.7));\n      transition: background 0.15s linear;\n      height: 44px;\n      width: 100px;\n      padding: 0 10px;\n\n      pointer-events: auto;\n    }\n\n    /*\n      Only show outline when keyboard focusing.\n      https://drafts.csswg.org/selectors-4/#the-focus-visible-pseudo\n    */\n    :host-context([media-keyboard-control]):host(:focus),\n    :host-context([media-keyboard-control]):host(:focus-within) {\n      box-shadow: inset 0 0 0 2px rgba(27, 127, 204, 0.9);\n    }\n\n    :host(:hover) {\n      background: var(--media-control-hover-background, rgba(50,50,60, 0.7));\n    }\n\n    input[type=range] {\n      /* Reset */\n      -webkit-appearance: none; /* Hides the slider so that custom slider can be made */\n      background: transparent; /* Otherwise white in Chrome */\n\n      /* Fill host with the range */\n      min-height: 100%;\n      width: var(--media-range-track-width, 100%); /* Specific width is required for Firefox. */\n\n      box-sizing: border-box;\n      padding: 0;\n      margin: 0;\n    }\n\n    /* Special styling for WebKit/Blink */\n    input[type=range]::-webkit-slider-thumb {\n      -webkit-appearance: none;\n      ${thumbStyles}\n      /* You need to specify a margin in Chrome, but in Firefox and IE it is automatic */\n      margin-top: calc(calc(0px - var(--thumb-height) + var(--track-height)) / 2);\n    }\n    input[type=range]::-moz-range-thumb { ${thumbStyles} }\n\n    input[type=range]::-webkit-slider-runnable-track { ${trackStyles} }\n    input[type=range]::-moz-range-track { ${trackStyles} }\n    input[type=range]::-ms-track {\n      /* Reset */\n      width: 100%;\n      cursor: pointer;\n      /* Hides the slider so custom styles can be added */\n      background: transparent;\n      border-color: transparent;\n      color: transparent;\n\n      ${trackStyles}\n    }\n\n    /* Eventually want to move towards different styles for focus-visible\n       https://github.com/WICG/focus-visible/blob/master/src/focus-visible.js\n       Youtube appears to do this by de-focusing a button after a button click */\n    input[type=range]:focus {\n      outline: 0;\n    }\n    input[type=range]:focus::-webkit-slider-runnable-track {\n      outline: 0;\n    }\n\n    input[type=range]:disabled::-webkit-slider-thumb {\n      background-color: #777;\n    }\n\n    input[type=range]:disabled::-webkit-slider-runnable-track {\n      background-color: #777;\n    }\n\n  </style>\n  <input id=\"range\" type=\"range\" min=\"0\" max=\"1000\" step=\"1\" value=\"0\">\n`;\n\nclass MediaChromeRange extends window.HTMLElement {\n  static get observedAttributes() {\n    return [MediaUIAttributes.MEDIA_CONTROLLER];\n  }\n\n  constructor() {\n    super();\n\n    this.attachShadow({ mode: 'open' });\n    this.shadowRoot.appendChild(template.content.cloneNode(true));\n\n    this.range = this.shadowRoot.querySelector('#range');\n    this.range.addEventListener('input', this.updateBar.bind(this));\n  }\n\n  attributeChangedCallback(attrName, oldValue, newValue) {\n    if (attrName === MediaUIAttributes.MEDIA_CONTROLLER) {\n      if (oldValue) {\n        const mediaControllerEl = document.getElementById(oldValue);\n        mediaControllerEl?.unassociateElement?.(this);\n      }\n      if (newValue) {\n        const mediaControllerEl = document.getElementById(newValue);\n        mediaControllerEl?.associateElement?.(this);\n      }\n    }\n  }\n\n  connectedCallback() {\n    const mediaControllerId = this.getAttribute(\n      MediaUIAttributes.MEDIA_CONTROLLER\n    );\n    if (mediaControllerId) {\n      const mediaControllerEl = document.getElementById(mediaControllerId);\n      mediaControllerEl?.associateElement?.(this);\n    }\n    this.updateBar();\n  }\n\n  disconnectedCallback() {\n    const mediaControllerSelector = this.getAttribute(\n      MediaUIAttributes.MEDIA_CONTROLLER\n    );\n    if (mediaControllerSelector) {\n      const mediaControllerEl = document.getElementById(mediaControllerId);\n      mediaControllerEl?.unassociateElement?.(this);\n    }\n  }\n\n  /*\n    Native ranges have a single color for the whole track, which is different\n    from most video players that have a colored \"bar\" to the left of the handle\n    showing playback progress or volume level. Here we're building that bar\n    by using a background gradient that moves with the range value.\n  */\n  updateBar() {\n    const colorArray = this.getBarColors();\n\n    let gradientStr = 'linear-gradient(to right, ';\n    let prevPercent = 0;\n    colorArray.forEach((color) => {\n      if (color[1] < prevPercent) return;\n      gradientStr =\n        gradientStr + `${color[0]} ${prevPercent}%, ${color[0]} ${color[1]}%,`;\n      prevPercent = color[1];\n    });\n    gradientStr = gradientStr.slice(0, gradientStr.length - 1) + ')';\n\n    this.style.setProperty(\n      '--media-range-track-background-internal',\n      gradientStr\n    );\n  }\n\n  /*\n    Build the color gradient for the range bar.\n    Creating an array so progress-bar can insert the buffered bar.\n  */\n  getBarColors() {\n    const range = this.range;\n    const rangePercent = (range.value / range.max) * 100;\n\n    let colorArray = [\n      ['var(--media-range-bar-color, #fff)', rangePercent],\n      ['var(--media-range-track-background-color, #333)', 100],\n    ];\n\n    return colorArray;\n  }\n}\n\ndefineCustomElement('media-chrome-range', MediaChromeRange);\n\nexport default MediaChromeRange;\n"],
  "mappings": "AAAA,mDACA,qEACA,sEAKA,KAAM,GAAW,EAAS,cAAc,YAIlC,EAAc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAad,EAAc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAapB,EAAS,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAiDb;AAAA;AAAA;AAAA;AAAA,4CAIoC;AAAA;AAAA,yDAEa;AAAA,4CACb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAUpC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAyBR,eAA+B,GAAO,WAAY,WACrC,qBAAqB,CAC9B,MAAO,CAAC,EAAkB,kBAG5B,aAAc,CACZ,QAEA,KAAK,aAAa,CAAE,KAAM,SAC1B,KAAK,WAAW,YAAY,EAAS,QAAQ,UAAU,KAEvD,KAAK,MAAQ,KAAK,WAAW,cAAc,UAC3C,KAAK,MAAM,iBAAiB,QAAS,KAAK,UAAU,KAAK,OAG3D,yBAAyB,EAAU,EAAU,EAAU,CA/IzD,QAgJI,GAAI,IAAa,EAAkB,iBAAkB,CACnD,GAAI,EAAU,CACZ,KAAM,GAAoB,EAAS,eAAe,GAClD,oBAAmB,qBAAnB,eAAwC,MAE1C,GAAI,EAAU,CACZ,KAAM,GAAoB,EAAS,eAAe,GAClD,oBAAmB,mBAAnB,eAAsC,QAK5C,mBAAoB,CA5JtB,MA6JI,KAAM,GAAoB,KAAK,aAC7B,EAAkB,kBAEpB,GAAI,EAAmB,CACrB,KAAM,GAAoB,EAAS,eAAe,GAClD,oBAAmB,mBAAnB,eAAsC,MAExC,KAAK,YAGP,sBAAuB,CAvKzB,MA2KI,GAHgC,KAAK,aACnC,EAAkB,kBAES,CAC3B,KAAM,GAAoB,EAAS,eAAe,mBAClD,oBAAmB,qBAAnB,eAAwC,OAU5C,WAAY,CACV,KAAM,GAAa,KAAK,eAExB,GAAI,GAAc,6BACd,EAAc,EAClB,EAAW,QAAQ,AAAC,GAAU,CAC5B,AAAI,EAAM,GAAK,GACf,GACE,EAAc,GAAG,EAAM,MAAM,OAAiB,EAAM,MAAM,EAAM,OAClE,EAAc,EAAM,MAEtB,EAAc,EAAY,MAAM,EAAG,EAAY,OAAS,GAAK,IAE7D,KAAK,MAAM,YACT,0CACA,GAQJ,cAAe,CACb,KAAM,GAAQ,KAAK,MACb,EAAgB,EAAM,MAAQ,EAAM,IAAO,IAOjD,MALiB,CACf,CAAC,qCAAsC,GACvC,CAAC,kDAAmD,OAO1D,EAAoB,qBAAsB,GAE1C,GAAO,GAAQ",
  "names": []
}
