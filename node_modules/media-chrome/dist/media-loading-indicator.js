import{MediaUIAttributes as n}from"./constants.js";import{nouns as m}from"./labels/labels.js";import{defineCustomElement as D}from"./utils/defineCustomElement.js";import{Window as A,Document as o}from"./utils/server-safe-globals.js";const g=o.createElement("template"),f=`
<svg aria-hidden="true" viewBox="0 0 100 100">
  <path d="M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50">
    <animateTransform
       attributeName="transform"
       attributeType="XML"
       type="rotate"
       dur="1s"
       from="0 50 50"
       to="360 50 50"
       repeatCount="indefinite" />
  </path>
</svg>
`;g.innerHTML=`
<style>
:host {
  display: inline-block;
  vertical-align: middle;
  box-sizing: border-box;
}

#status {
  color: rgba(0,0,0,0);
  width: 0px;
  height: 0px;
}

:host slot[name=loading] > *,
:host ::slotted([slot=loading]) {
  opacity: 1;
  transition: opacity 0.15s;
}

:host(:not([is-loading])) slot[name=loading] > *, 
:host(:not([is-loading])) ::slotted([slot=loading]) {
  opacity: 0;
}

:host(:not([is-loading])) #status {
  display: none;
}

svg, img, ::slotted(svg), ::slotted(img) {
  width: var(--media-loading-icon-width, 100px);
  height: var(--media-loading-icon-height);
  fill: var(--media-icon-color, #fff);
  vertical-align: middle;
}
</style>

<slot name="loading">${f}</slot>
<div id="status" role="status" aria-live="polite">${m.MEDIA_LOADING()}</div>
`;const I=500;class h extends A.HTMLElement{static get observedAttributes(){return[n.MEDIA_CONTROLLER,n.MEDIA_PAUSED,n.MEDIA_LOADING,"loading-delay"]}constructor(){super();const a=this.attachShadow({mode:"open"}),e=g.content.cloneNode(!0);a.appendChild(e)}attributeChangedCallback(a,e,t){var s,d,l;if(a===n.MEDIA_LOADING||a===n.MEDIA_PAUSED){const i=this.getAttribute(n.MEDIA_PAUSED)!=null,r=this.getAttribute(n.MEDIA_LOADING)!=null,c=!i&&r;if(!c)this.loadingDelayHandle&&(clearTimeout(this.loadingDelayHandle),this.loadingDelayHandle=void 0),this.removeAttribute("is-loading");else if(!this.loadingDelayHandle&&c){const u=+((s=this.getAttribute("loading-delay"))!=null?s:I);this.loadingDelayHandle=setTimeout(()=>{this.setAttribute("is-loading",""),this.loadingDelayHandle=void 0},u)}}else if(a===n.MEDIA_CONTROLLER){if(e){const i=o.getElementById(e);(d=i==null?void 0:i.unassociateElement)==null||d.call(i,this)}if(t){const i=o.getElementById(t);(l=i==null?void 0:i.associateElement)==null||l.call(i,this)}}}connectedCallback(){var e;const a=this.getAttribute(n.MEDIA_CONTROLLER);if(a){const t=o.getElementById(a);(e=t==null?void 0:t.associateElement)==null||e.call(t,this)}}disconnectedCallback(){var e;if(this.loadingDelayHandle&&(clearTimeout(this.loadingDelayHandle),this.loadingDelayHandle=void 0),this.getAttribute(n.MEDIA_CONTROLLER)){const t=o.getElementById(mediaControllerId);(e=t==null?void 0:t.unassociateElement)==null||e.call(t,this)}}}D("media-loading-indicator",h);var E=h;export{E as default};
//# sourceMappingURL=media-loading-indicator.js.map
