{
  "version": 3,
  "sources": ["../src/js/media-playback-rate-button.js"],
  "sourcesContent": ["import MediaChromeButton from './media-chrome-button.js';\nimport { defineCustomElement } from './utils/defineCustomElement.js';\nimport {\n  Window as window,\n  Document as document,\n} from './utils/server-safe-globals.js';\nimport { MediaUIEvents, MediaUIAttributes } from './constants.js';\nimport { nouns } from './labels/labels.js';\n\n/*\n  <media-playback-rate-button rates=\"1 1.5 2\">\n*/\n\nconst DEFAULT_RATES = [1, 1.25, 1.5, 1.75, 2];\nconst DEFAULT_RATE = 1;\n\nconst slotTemplate = document.createElement('template');\nslotTemplate.innerHTML = `\n  <style>\n  :host {\n    font-size: 14px;\n    line-height: 24px;\n    font-weight: bold;\n  }\n\n  #container {\n    height: var(--media-text-content-height, 24px);\n  }\n  </style>\n\n  <span id=\"container\"></span>\n`;\n\nclass MediaPlaybackRateButton extends MediaChromeButton {\n  static get observedAttributes() {\n    return [\n      ...super.observedAttributes,\n      MediaUIAttributes.MEDIA_PLAYBACK_RATE,\n      'rates',\n    ];\n  }\n\n  constructor(options = {}) {\n    super({ slotTemplate, ...options });\n    this._rates = DEFAULT_RATES;\n    this.container = this.shadowRoot.querySelector('#container');\n    this.container.innerHTML = `${DEFAULT_RATE}x`;\n  }\n\n  attributeChangedCallback(attrName, oldValue, newValue) {\n    if (attrName === 'rates') {\n      // This will:\n      // 1. parse the space-separated attribute string (standard for representing lists as HTML/CSS values) into an array (of strings)\n      //   The current regex allows for commas to be present between numbers to preserve legacy behavior\n      // 2. convert that list into numbers (including potentially NaN)\n      // 3. filter out all NaNs for invalid values\n      // 4. sort the array of numbers to ensure the expected toggle-through order for playback rate.\n      const newRates = (newValue ?? '')\n        .trim()\n        .split(/\\s*,?\\s+/)\n        .map((str) => Number(str))\n        .filter((num) => !Number.isNaN(num))\n        .sort((a, b) => a - b);\n      this._rates = newRates.length ? newRates : DEFAULT_RATES;\n      return;\n    }\n    if (attrName === MediaUIAttributes.MEDIA_PLAYBACK_RATE) {\n      const newPlaybackRate = newValue ? +newValue : Number.NaN;\n      const playbackRate = !Number.isNaN(newPlaybackRate)\n        ? newPlaybackRate\n        : DEFAULT_RATE;\n      this.container.innerHTML = `${playbackRate}x`;\n      this.setAttribute('aria-label', nouns.PLAYBACK_RATE({ playbackRate }));\n      return;\n    }\n    super.attributeChangedCallback(attrName, oldValue, newValue);\n  }\n\n  handleClick(_e) {\n    const currentRate =\n      +this.getAttribute(MediaUIAttributes.MEDIA_PLAYBACK_RATE) || DEFAULT_RATE;\n    const detail =\n      this._rates.find((r) => r > currentRate) ??\n      this._rates[0] ??\n      DEFAULT_RATE;\n    const evt = new window.CustomEvent(\n      MediaUIEvents.MEDIA_PLAYBACK_RATE_REQUEST,\n      { composed: true, bubbles: true, detail }\n    );\n    this.dispatchEvent(evt);\n  }\n}\n\ndefineCustomElement('media-playback-rate-button', MediaPlaybackRateButton);\n\nexport default MediaPlaybackRateButton;\n"],
  "mappings": "AAAA,wCACA,qEACA,sEAIA,sEACA,2CAMA,KAAM,GAAgB,CAAC,EAAG,KAAM,IAAK,KAAM,GACrC,EAAe,EAEf,EAAe,EAAS,cAAc,YAC5C,EAAa,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAgBzB,eAAsC,EAAkB,WAC3C,qBAAqB,CAC9B,MAAO,CACL,GAAG,MAAM,mBACT,EAAkB,oBAClB,SAIJ,YAAY,EAAU,GAAI,CACxB,MAAM,CAAE,kBAAiB,IACzB,KAAK,OAAS,EACd,KAAK,UAAY,KAAK,WAAW,cAAc,cAC/C,KAAK,UAAU,UAAY,GAAG,KAGhC,yBAAyB,EAAU,EAAU,EAAU,CACrD,GAAI,IAAa,QAAS,CAOxB,KAAM,GAAY,WAAY,IAC3B,OACA,MAAM,YACN,IAAI,AAAC,GAAQ,OAAO,IACpB,OAAO,AAAC,GAAQ,CAAC,OAAO,MAAM,IAC9B,KAAK,CAAC,EAAG,IAAM,EAAI,GACtB,KAAK,OAAS,EAAS,OAAS,EAAW,EAC3C,OAEF,GAAI,IAAa,EAAkB,oBAAqB,CACtD,KAAM,GAAkB,EAAW,CAAC,EAAW,OAAO,IAChD,EAAe,AAAC,OAAO,MAAM,GAE/B,EADA,EAEJ,KAAK,UAAU,UAAY,GAAG,KAC9B,KAAK,aAAa,aAAc,EAAM,cAAc,CAAE,kBACtD,OAEF,MAAM,yBAAyB,EAAU,EAAU,GAGrD,YAAY,EAAI,CA9ElB,QA+EI,KAAM,GACJ,CAAC,KAAK,aAAa,EAAkB,sBAAwB,EACzD,EACJ,WAAK,OAAO,KAAK,AAAC,GAAM,EAAI,KAA5B,OACA,KAAK,OAAO,KADZ,OAEA,EACI,EAAM,GAAI,GAAO,YACrB,EAAc,4BACd,CAAE,SAAU,GAAM,QAAS,GAAM,WAEnC,KAAK,cAAc,IAIvB,EAAoB,6BAA8B,GAElD,GAAO,GAAQ",
  "names": []
}
