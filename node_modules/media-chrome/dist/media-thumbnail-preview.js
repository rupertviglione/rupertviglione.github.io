import{Window as u,Document as n}from"./utils/server-safe-globals.js";import{defineCustomElement as g}from"./utils/defineCustomElement.js";import{MediaUIAttributes as i}from"./constants.js";const r=n.createElement("template");r.innerHTML=`
  <style>
    :host {
      background-color: #000;
      height: auto;
      width: auto;
    }

    img {
      object-fit: none;
    }
  </style>
  <img crossorigin loading="eager" decoding="async" />
`;class h extends u.HTMLElement{static get observedAttributes(){return[i.MEDIA_CONTROLLER,"time",i.MEDIA_PREVIEW_IMAGE,i.MEDIA_PREVIEW_COORDS]}constructor(){super();this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(r.content.cloneNode(!0))}connectedCallback(){var s;const o=this.getAttribute(i.MEDIA_CONTROLLER);if(o){const t=n.getElementById(o);(s=t==null?void 0:t.associateElement)==null||s.call(t,this)}}disconnectedCallback(){var s;if(this.getAttribute(i.MEDIA_CONTROLLER)){const t=n.getElementById(mediaControllerId);(s=t==null?void 0:t.unassociateElement)==null||s.call(t,this)}}attributeChangedCallback(o,s,t){var c,a;if(["time",i.MEDIA_PREVIEW_IMAGE,i.MEDIA_PREVIEW_COORDS].includes(o)&&this.update(),o===i.MEDIA_CONTROLLER){if(s){const e=n.getElementById(s);(c=e==null?void 0:e.unassociateElement)==null||c.call(e,this)}if(t){const e=n.getElementById(t);(a=e==null?void 0:e.associateElement)==null||a.call(e,this)}}}update(){const o=this.getAttribute(i.MEDIA_PREVIEW_COORDS),s=this.getAttribute(i.MEDIA_PREVIEW_IMAGE);if(!(o&&s))return;const t=this.shadowRoot.querySelector("img"),[c,a,e,E]=o.split(/\s+/).map(I=>+I),m=s,d=()=>{t.style.height=`${E}px`,t.style["aspect-ratio"]=`${e} / ${E}`};t.src!==m&&(t.onload=d,t.src=m,d()),d(),t.style["object-position"]=`-${c}px -${a}px`}}g("media-thumbnail-preview",h);var b=h;export{b as default};
//# sourceMappingURL=media-thumbnail-preview.js.map
