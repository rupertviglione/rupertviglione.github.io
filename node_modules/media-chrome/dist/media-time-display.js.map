{
  "version": 3,
  "sources": ["../src/js/media-time-display.js"],
  "sourcesContent": ["import MediaTextDisplay from './media-text-display.js';\nimport { defineCustomElement } from './utils/defineCustomElement.js';\nimport { formatAsTimePhrase, formatTime } from './utils/time.js';\nimport { MediaUIAttributes } from './constants.js';\nimport { nouns } from './labels/labels.js';\n// Todo: Use data locals: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toLocaleTimeString\n\nconst DEFAULT_TIMES_SEP = '&nbsp;/&nbsp;';\n\nconst formatTimesLabel = (el, { timesSep = DEFAULT_TIMES_SEP } = {}) => {\n  const showRemaining = el.getAttribute('remaining') != null;\n  const showDuration = el.getAttribute('show-duration') != null;\n  const currentTime = +el.getAttribute(MediaUIAttributes.MEDIA_CURRENT_TIME);\n  const duration = +el.getAttribute(MediaUIAttributes.MEDIA_DURATION);\n\n  const timeLabel = showRemaining\n    ? formatTime(0 - (duration - currentTime))\n    : formatTime(currentTime);\n\n  if (!showDuration) return timeLabel;\n  return `${timeLabel}${timesSep}${formatTime(duration)}`;\n};\n\nconst DEFAULT_MISSING_TIME_PHRASE = 'video not loaded, unknown time.';\n\nconst updateAriaValueText = (el) => {\n  if (\n    !(\n      el.hasAttribute(MediaUIAttributes.MEDIA_CURRENT_TIME) &&\n      el.hasAttribute(MediaUIAttributes.MEDIA_DURATION)\n    )\n  ) {\n    el.setAttribute('aria-valuetext', DEFAULT_MISSING_TIME_PHRASE);\n    return;\n  }\n  const showRemaining = el.getAttribute('remaining') != null;\n  const showDuration = el.getAttribute('show-duration') != null;\n  const currentTime = +el.getAttribute(MediaUIAttributes.MEDIA_CURRENT_TIME);\n  const duration = +el.getAttribute(MediaUIAttributes.MEDIA_DURATION);\n\n  const currentTimePhrase = showRemaining\n    ? formatAsTimePhrase(0 - (duration - currentTime))\n    : formatAsTimePhrase(currentTime);\n\n  if (!showDuration) {\n    el.setAttribute('aria-valuetext', currentTimePhrase);\n    return;\n  }\n  const totalTimePhrase = formatAsTimePhrase(duration);\n  const fullPhrase = `${currentTimePhrase} of ${totalTimePhrase}`;\n  el.setAttribute('aria-valuetext', fullPhrase);\n};\n\nclass MediaTimeDisplay extends MediaTextDisplay {\n  static get observedAttributes() {\n    return [\n      ...super.observedAttributes,\n      MediaUIAttributes.MEDIA_CURRENT_TIME,\n      MediaUIAttributes.MEDIA_DURATION,\n      'remaining',\n      'show-duration',\n    ];\n  }\n\n  connectedCallback() {\n    this.setAttribute('role', 'progressbar');\n    this.setAttribute('aria-label', nouns.PLAYBACK_TIME());\n    this.setAttribute('tabindex', 0);\n    super.connectedCallback();\n  }\n\n  attributeChangedCallback(attrName, oldValue, newValue) {\n    if (\n      [\n        MediaUIAttributes.MEDIA_CURRENT_TIME,\n        MediaUIAttributes.MEDIA_DURATION,\n        'remaining',\n        'show-duration',\n      ].includes(attrName)\n    ) {\n      const timesLabel = formatTimesLabel(this);\n      updateAriaValueText(this);\n      this.container.innerHTML = timesLabel;\n    }\n    super.attributeChangedCallback(attrName, oldValue, newValue);\n  }\n}\n\ndefineCustomElement('media-time-display', MediaTimeDisplay);\n\nexport default MediaTimeDisplay;\n"],
  "mappings": "AAAA,uCACA,qEACA,qEACA,mDACA,2CAGA,KAAM,GAAoB,gBAEpB,EAAmB,CAAC,EAAI,CAAE,WAAW,GAAsB,KAAO,CACtE,KAAM,GAAgB,EAAG,aAAa,cAAgB,KAChD,EAAe,EAAG,aAAa,kBAAoB,KACnD,EAAc,CAAC,EAAG,aAAa,EAAkB,oBACjD,EAAW,CAAC,EAAG,aAAa,EAAkB,gBAE9C,EAAY,EACd,EAAW,EAAK,GAAW,IAC3B,EAAW,GAEf,MAAK,GACE,GAAG,IAAY,IAAW,EAAW,KADlB,GAItB,EAA8B,kCAE9B,EAAsB,AAAC,GAAO,CAClC,GACE,CACE,GAAG,aAAa,EAAkB,qBAClC,EAAG,aAAa,EAAkB,iBAEpC,CACA,EAAG,aAAa,iBAAkB,GAClC,OAEF,KAAM,GAAgB,EAAG,aAAa,cAAgB,KAChD,EAAe,EAAG,aAAa,kBAAoB,KACnD,EAAc,CAAC,EAAG,aAAa,EAAkB,oBACjD,EAAW,CAAC,EAAG,aAAa,EAAkB,gBAE9C,EAAoB,EACtB,EAAmB,EAAK,GAAW,IACnC,EAAmB,GAEvB,GAAI,CAAC,EAAc,CACjB,EAAG,aAAa,iBAAkB,GAClC,OAEF,KAAM,GAAkB,EAAmB,GACrC,EAAa,GAAG,QAAwB,IAC9C,EAAG,aAAa,iBAAkB,IAGpC,eAA+B,EAAiB,WACnC,qBAAqB,CAC9B,MAAO,CACL,GAAG,MAAM,mBACT,EAAkB,mBAClB,EAAkB,eAClB,YACA,iBAIJ,mBAAoB,CAClB,KAAK,aAAa,OAAQ,eAC1B,KAAK,aAAa,aAAc,EAAM,iBACtC,KAAK,aAAa,WAAY,GAC9B,MAAM,oBAGR,yBAAyB,EAAU,EAAU,EAAU,CACrD,GACE,CACE,EAAkB,mBAClB,EAAkB,eAClB,YACA,iBACA,SAAS,GACX,CACA,KAAM,GAAa,EAAiB,MACpC,EAAoB,MACpB,KAAK,UAAU,UAAY,EAE7B,MAAM,yBAAyB,EAAU,EAAU,IAIvD,EAAoB,qBAAsB,GAE1C,GAAO,GAAQ",
  "names": []
}
